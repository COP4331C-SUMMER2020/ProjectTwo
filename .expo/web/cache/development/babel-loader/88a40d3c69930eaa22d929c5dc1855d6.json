{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\Users\\\\abocr\\\\Documents\\\\School\\\\Processes\\\\ProjectTwo\\\\src\\\\Reset.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from \"react\";\nimport { Redirect } from \"react-router-dom\";\n\nvar Reset = function (_React$Component) {\n  _inherits(Reset, _React$Component);\n\n  var _super = _createSuper(Reset);\n\n  function Reset() {\n    var _this;\n\n    _classCallCheck(this, Reset);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      redirect: null\n    };\n    return _this;\n  }\n\n  _createClass(Reset, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var id = 0;\n      var search = this.props.location.search;\n      var params = new URLSearchParams(search);\n      id = params.get('id');\n\n      var handleSubmit = function handleSubmit(e) {\n        var lPassword, jsonPayload;\n        return _regeneratorRuntime.async(function handleSubmit$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault();\n                document.getElementById(\"passwordError\").innerHTML = \"\";\n                lPassword = document.getElementById(\"loginpassword\").value;\n\n                if (!(lPassword == \"\")) {\n                  _context.next = 6;\n                  break;\n                }\n\n                document.getElementById(\"passwordError\").innerHTML = \"Please enter a password.\";\n                return _context.abrupt(\"return\");\n\n              case 6:\n                jsonPayload = '{\"userId\" : \"' + id + '\", \"password\" : \"' + lPassword + '\"}';\n                fetch('http://192.168.56.1:5000/api/reset', {\n                  method: 'POST',\n                  headers: {\n                    'Content-type': 'application/json'\n                  },\n                  body: jsonPayload\n                }).then(function (response) {\n                  return response.json();\n                }).then(function (data) {\n                  console.log('Success:', data);\n\n                  if (data.error == \"\") {\n                    _this2.setState({\n                      redirect: \"/login\"\n                    });\n                  } else {\n                    document.getElementById(\"errorReturn\").innerHTML = data.error;\n                  }\n                }).catch(function (error) {\n                  console.error('Error:', error);\n                  document.getElementById(\"errorReturn\").innerHTML = error;\n                  return;\n                });\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, null, null, null, Promise);\n      };\n\n      if (this.state.redirect) {\n        return React.createElement(Redirect, {\n          to: this.state.redirect,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 11\n          }\n        });\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 4\n        }\n      }, React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 5\n        }\n      }, React.createElement(\"input\", {\n        id: \"loginpassword\",\n        name: \"loginpassword\",\n        type: \"password\",\n        placeholder: \"Your new password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 6\n        }\n      }), React.createElement(\"p\", {\n        className: \"passwordError\",\n        id: \"passwordError\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 6\n        }\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 6\n        }\n      }, React.createElement(\"button\", {\n        id: \"resetButton\",\n        onClick: handleSubmit,\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 7\n        }\n      }, \"Reset Password\"))));\n    }\n  }]);\n\n  return Reset;\n}(React.Component);\n\nexport { Reset as default };","map":{"version":3,"sources":["C:/Users/abocr/Documents/School/Processes/ProjectTwo/src/Reset.js"],"names":["React","Redirect","Reset","state","redirect","id","search","props","location","params","URLSearchParams","get","handleSubmit","e","preventDefault","document","getElementById","innerHTML","lPassword","value","jsonPayload","fetch","method","headers","body","then","response","json","data","console","log","error","setState","catch","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nexport default class Reset extends React.Component {\r\n\tstate = { redirect: null };\r\n\trender() {\r\n\t\tvar id = 0;\r\n\t\tvar search = this.props.location.search;\r\n\t\tvar params = new URLSearchParams(search);\r\n\t\tid = params.get('id');\r\n\t\tconst handleSubmit = async e => {\r\n\t\t\te.preventDefault();\r\n\t\t\t\r\n\t\t\tdocument.getElementById(\"passwordError\").innerHTML = \"\";\r\n\t\t\tvar lPassword = document.getElementById(\"loginpassword\").value;\r\n\t\t\tif (lPassword == \"\") {\r\n\t\t\t\tdocument.getElementById(\"passwordError\").innerHTML = \"Please enter a password.\";\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar jsonPayload = '{\"userId\" : \"' + id + '\", \"password\" : \"' + lPassword + '\"}';\r\n\t\t\t\r\n\t\t\tfetch('http://192.168.56.1:5000/api/reset', {\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-type': 'application/json',\r\n\t\t\t\t},\r\n\t\t\t\tbody: jsonPayload,\r\n\t\t\t})\r\n\t\t\t.then(response => response.json())\r\n\t\t\t.then(data => {\r\n\t\t\t\tconsole.log('Success:', data);\r\n\t\t\t\tif (data.error == \"\") {\r\n\t\t\t\t\tthis.setState({ redirect: \"/login\" });\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tdocument.getElementById(\"errorReturn\").innerHTML = data.error;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\tconsole.error('Error:', error);\r\n\t\t\t\tdocument.getElementById(\"errorReturn\").innerHTML = error;\r\n\t\t\t\treturn;\r\n\t\t\t});\r\n\t\t};\r\n\t\t\r\n\t\tif (this.state.redirect) {\r\n\t\t\treturn <Redirect to={this.state.redirect} />\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<form>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t id=\"loginpassword\"\r\n\t\t\t\t\t name=\"loginpassword\"\r\n\t\t\t\t\t type=\"password\"\r\n\t\t\t\t\t placeholder=\"Your new password\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<p className=\"passwordError\" id=\"passwordError\" />\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t id=\"resetButton\"\r\n\t\t\t\t\t\t onClick={handleSubmit}\r\n\t\t\t\t\t\t type=\"submit\">\r\n\t\t\t\t\t\t\tReset Password\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}"]},"metadata":{},"sourceType":"module"}